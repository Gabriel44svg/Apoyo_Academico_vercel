{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Portal de Apoyo - FES Acatlán{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
    <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']], 
        displayMath: [['$$', '$$'], ['\\[', '\\]']] 
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
    
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

<header>
    <img src="{% static 'img/unam.png' %}" class="logo" alt="Logo UNAM">
    <div class="titulo-facultad">
        UNIVERSIDAD NACIONAL AUTÓNOMA DE MÉXICO<br>
        <span style="font-size:0.9em;color:#333;">Facultad de Estudios Superiores Acatlán</span>
    </div>
    <img src="{% static 'img/fes.png' %}" class="logo" alt="Logo FES">
</header>

<nav class="top-nav">
    <a href="{% url 'home' %}">Inicio</a>
    <a href="{% url 'paginas_interes' %}">Páginas de interés</a>

    <!-- Generador de gráficas -->
    <a href="{% url 'generador' %}" style="color: white; text-decoration: none;">
        Generador de Gráficas
    </a>

    {% if user.is_authenticated %}

        <!-- Panel Admin SOLO si es superusuario -->
        {% if user.is_superuser %}
            <a href="{% url 'panel_admin' %}"
               style="background-color: #c0392b; color: white; font-weight: bold; margin-right: 10px;">
                 Panel Admin
            </a>
        {% endif %}

        <!-- Botón de subir contenido -->
        <a href="{% url 'agregar_contenido' %}"
           style="background-color: #d1a938; color: #000; font-weight: bold;">
            + Subir Material
        </a>

        <!-- Mensaje Hola usuario -->
        <span style="margin-left: 10px; color: white;">
            Hola, {{ user.username }}
        </span>

        <!-- Botón de logout -->
        <form action="{% url 'logout' %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" style="
                background:none;
                border:none;
                color:white;
                cursor:pointer;
                text-decoration:underline;
                font-family:inherit;
                font-size:inherit;">
                Salir
            </button>
        </form>

    {% else %}
        <!-- Botón de login -->
        <a href="{% url 'login' %}">Ingresar</a>
    {% endif %}

    <a href="#">Acerca de</a>
</nav>



<div class="main-container">
    <div class="background-overlay"></div>

    <aside class="sidebar">

        <div class="menu-item has-submenu">
    Probabilidad y estadística
    <div class="submenu">
        <a href="{% url 'detalle_materia' 'probabilidad' %}#definicion">Definiciones</a>
        <a href="{% url 'detalle_materia' 'probabilidad' %}#video">Videos</a>
        <a href="{% url 'detalle_materia' 'probabilidad' %}#notebook">Notebooks</a>
        <a href="{% url 'detalle_materia' 'probabilidad' %}#aplicacion">Aplicaciones</a>
    </div>
</div>

<div class="menu-item has-submenu">
    Cálculo
    <div class="submenu">
        <a href="{% url 'detalle_materia' 'calculo' %}#definicion">Definiciones</a>
        <a href="{% url 'detalle_materia' 'calculo' %}#video">Videos</a>
        <a href="{% url 'detalle_materia' 'calculo' %}#notebook">Notebooks</a>
        <a href="{% url 'detalle_materia' 'calculo' %}#aplicacion">Aplicaciones</a>
    </div>
</div>

<div class="menu-item has-submenu">
    Ecuaciones Diferenciales
    <div class="submenu">
        <a href="{% url 'detalle_materia' 'ecuaciones' %}#definicion">Definiciones</a>
        <a href="{% url 'detalle_materia' 'ecuaciones' %}#video">Videos</a>
        <a href="{% url 'detalle_materia' 'ecuaciones' %}#notebook">Notebooks</a>
        <a href="{% url 'detalle_materia' 'ecuaciones' %}#aplicacion">Aplicaciones</a>
    </div>
</div>

<div class="menu-item has-submenu">
    Optimización
    <div class="submenu">
        <a href="{% url 'detalle_materia' 'optimizacion' %}#definicion">Definiciones</a>
        <a href="{% url 'detalle_materia' 'optimizacion' %}#video">Videos</a>
        <a href="{% url 'detalle_materia' 'optimizacion' %}#notebook">Notebooks</a>
        <a href="{% url 'detalle_materia' 'optimizacion' %}#aplicacion">Aplicaciones</a>
    </div>
</div>

<div class="menu-item has-submenu">
    Álgebra Lineal
    <div class="submenu">
        <a href="{% url 'detalle_materia' 'algebra' %}#definicion">Definiciones</a>
        <a href="{% url 'detalle_materia' 'algebra' %}#video">Videos</a>
        <a href="{% url 'detalle_materia' 'algebra' %}#notebook">Notebooks</a>
        <a href="{% url 'detalle_materia' 'algebra' %}#aplicacion">Aplicaciones</a>
    </div>
</div>

<div class="menu-item has-submenu">
    Métodos Numéricos
    <div class="submenu">
        <a href="{% url 'detalle_materia' 'metodos' %}#definicion">Definiciones</a>
        <a href="{% url 'detalle_materia' 'metodos' %}#video">Videos</a>
        <a href="{% url 'detalle_materia' 'metodos' %}#notebook">Notebooks</a>
        <a href="{% url 'detalle_materia' 'metodos' %}#aplicacion">Aplicaciones</a>
    </div>
</div>

<div class="menu-item has-submenu">
    Procesos Estocásticos
    <div class="submenu">
        <a href="{% url 'detalle_materia' 'procesos' %}#definicion">Definiciones</a>
        <a href="{% url 'detalle_materia' 'procesos' %}#video">Videos</a>
        <a href="{% url 'detalle_materia' 'procesos' %}#notebook">Notebooks</a>
        <a href="{% url 'detalle_materia' 'procesos' %}#aplicacion">Aplicaciones</a>
    </div>
</div>

<div class="menu-item has-submenu">
    Geometría
    <div class="submenu">
        <a href="{% url 'detalle_materia' 'geometria' %}#definicion">Definiciones</a>
        <a href="{% url 'detalle_materia' 'geometria' %}#video">Videos</a>
        <a href="{% url 'detalle_materia' 'geometria' %}#notebook">Notebooks</a>
        <a href="{% url 'detalle_materia' 'geometria' %}#aplicacion">Aplicaciones</a>
    </div>
</div>

<div class="menu-item has-submenu">
    Coloquios
    <div class="submenu">
        <a href="{% url 'detalle_materia' 'coloquios' %}#url">Coloquios</a>
    </div>
</div>

<div class="menu-item has-submenu">
    Seminarios
    <div class="submenu">
        <a href="{% url 'detalle_materia' 'seminarios' %}#url">Seminarios</a>
    </div>
</div>

    </aside>

    <section class="content-area">
        {% block content %}
        <div class="info-box">
            <h2>Bienvenido al Portal de Apoyo</h2>
            <hr style="width:50%;margin:0 auto 20px auto;border-color:white;">
            <p>Selecciona una materia en el menú izquierdo para ver el contenido.</p>
        </div>
        {% endblock %}
    </section>
</div>

<footer>
    © 2025 Facultad de Estudios Superiores Acatlán — Todos los derechos reservados.
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const menuItems = document.querySelectorAll('.menu-item.has-submenu');

        menuItems.forEach(item => {
            item.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    return;
                }
                e.stopPropagation();
                menuItems.forEach(otherItem => {
                    if (otherItem !== item) {
                        otherItem.classList.remove('active');
                    }
                });
                this.classList.toggle('active');
            });
        });

        document.addEventListener('click', function(e) {
            if (!e.target.closest('.menu-item')) {
                menuItems.forEach(item => {
                    item.classList.remove('active');
                });
            }
        });
    });
</script>

</body>
</html>